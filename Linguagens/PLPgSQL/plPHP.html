<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" dir="ltr" lang="en"><head><title>PostgreSQL: News: plPHP RC1 is now available</title>

  
    

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="shortcut icon" href="http://www.postgresql.org/favicon.ico">
    <link rel="alternate" type="application/rss+xml" title="PostgreSQL news" href="http://www.postgresql.org/news.rss">
    <link rel="alternate" type="application/rss+xml" title="PostgreSQL events" href="http://www.postgresql.org/events.rss">
    <style type="text/css" media="screen" title="Normal Text">@import url("/layout/css/blue/fixed.css");</style>
    <link rel="alternate stylesheet" media="screen" href="plPHP_arquivos/fixed_large.css" type="text/css" title="Large Text">
    <script type="text/javascript" src="plPHP_arquivos/styleswitcher.js"></script>
    <script type="text/javascript" src="plPHP_arquivos/geckostyle.js"></script><style type="text/css" media="screen">@import "/layout/css/blue/geckofixes.css";</style>

    <script type="text/javascript" src="plPHP_arquivos/pgads.js"></script><script type="text/javascript" src="plPHP_arquivos/adjs2.php"></script></head><body onload="pgAdsLoad()">
   <div id="pgContainerWrap">
    <div id="pgContainer">
      <span class="txtOffScreen"><a href="#pgContent" title="Skip site navigation" accesskey="1">Skip site navigation</a> (1)</span>
      <span class="txtOffScreen"><a href="#pgContentWrap" title="Skip section navigation" accesskey="2">Skip section navigation</a> (2)</span>
      <div id="pgHeaderContainer">
        <div id="pgSearch">
          <form method="get" action="http://search.postgresql.org/www.search">
            <div>
	      <h2 class="pgBlockHide"><label for="q">Search</label></h2>
              <input name="ul" value="http://www.postgresql.org/%" type="hidden"> <input name="cs" value="utf-8" type="hidden"> <input name="fm" value="on" type="hidden"> <input name="st" value="" type="hidden"> <input name="gr" value="on" type="hidden"> <input name="o" value="0" type="hidden"> <input name="ps" value="20" type="hidden"> <input name="s" value="rate" type="hidden"> <input name="fm" value="on" type="hidden"> <input name="cs" value="utf-8" type="hidden"> <input id="q" name="q" size="20" maxlength="255" onfocus="if( this.value==this.defaultValue ) this.value='';" value="Search" type="text"> <input id="submit" name="submit" value="Search" type="submit">
            </div>
          </form>
 	  <h2 class="pgBlockHide">Peripheral Links</h2>
          <div id="pgSearchNav">
            <ul id="pgSearchNavList">
              <li>
                Text Size: <a href="#" onkeypress="return false;" onclick="setActiveStyleSheet('Normal Text'); return false;" title="Normal Text Size">Normal</a> / <a href="#" onkeypress="return false;" onclick="setActiveStyleSheet('Large Text'); return false;" title="Large Text Size">Large</a>
              </li>
              <li>
                <a href="http://www.postgresql.org/about/donate">Donate</a>
              </li>
              <li>
                <a href="http://www.postgresql.org/about/contact">Contact</a>
              </li>
            </ul>
          </div>
        </div>
        <div id="pgHeader">
	  <h2 class="pgBlockHide">Header And Logo</h2>
          <div id="pgHeaderLogoLeft">
            <a href="http://www.postgresql.org/" title="PostgreSQL"><img src="plPHP_arquivos/hdr_left.png" alt="PostgreSQL" height="80" width="230"></a>
          </div>
          <div id="pgHeaderLogoRight">
            <span class="txtOffScreen">|</span>
            <a href="http://www.postgresql.org/" title="The world's most advanced open source database."><img src="plPHP_arquivos/hdr_right.png" alt="The world's most advanced open source database." height="80" width="210"></a>
          </div>
        </div>
  	<h2 class="pgBlockHide">Site Navigation</h2>
        <div id="pgTopNav">
          <div id="pgTopNavLeft">
            <img src="plPHP_arquivos/nav_lft.png" alt="" height="23" width="7">
          </div>
          <div id="pgTopNavRight">
            <img src="plPHP_arquivos/nav_rgt.png" alt="" height="23" width="7">
          </div>
          <ul id="pgTopNavList">
  <li>
    <a href="http://www.postgresql.org/" title="Home">Home</a>
  </li>
  <li>
    <a href="http://www.postgresql.org/about" title="About">About</a>
  </li>
  <li>
    <a href="http://www.postgresql.org/download" title="Download">Downloads</a>
  </li>
  <li>
    <a href="http://www.postgresql.org/docs" title="Documentation">Documentation</a>
  </li>
  <li>
    <a href="http://www.postgresql.org/community" title="Community">Community</a>
  </li>
  <li>
    <a href="http://www.postgresql.org/developer" title="Developers">Developers</a>
  </li>
  <li>
    <a href="http://www.postgresql.org/support" title="Support">Support</a>
  </li>
</ul>

        </div>
      </div>
      <div id="pgContent">
<div id="pgSideWrap">
<div id="pgSideNav">
<h2 class="pgBlockHide">Section Navigation</h2>
<ul>
<li><a href="http://www.postgresql.org/about/">About</a></li>
<li><a href="http://www.postgresql.org/about/advantages">Advantages</a></li>
<li><a href="http://www.postgresql.org/about/awards">Awards</a></li>
<li><a href="http://www.postgresql.org/about/casestudies/">Case Studies</a></li>
<li><a href="http://www.postgresql.org/about/users">Featured Users</a></li>
<li><a href="http://www.postgresql.org/about/history">History</a></li>
<li><a href="http://www.postgresql.org/about/sponsors">Sponsors</a>
 <ul>
  <li class="last-child"><a href="http://www.postgresql.org/about/servers">Servers</a></li>
 </ul>
</li>
<li><a href="http://www.postgresql.org/about/newsarchive">Latest News</a></li>
<li><a href="http://www.postgresql.org/about/eventarchive">Upcoming Events</a></li>
<li><a href="http://www.postgresql.org/about/press/">Press</a></li>
<li class="last-child"><a href="http://www.postgresql.org/about/licence">License</a></li>
</ul>

</div>
<div id="pgSponsorWrap">
<ul>
        <li><img src="plPHP_arquivos/hdr_sponsor.png" alt="Sponsor"></li>
	<li><div id="pgSponsorContents">
		<noscript><div><a
href="http://200.46.208.156/adclick.php?n=a69db620"><img
src="http://200.46.208.156/adview.php?n=a69db620" alt="" /></a></div></noscript>
	</div></li>
</ul>
</div>
</div>

<div id="pgContentWrap">

<h1>plPHP RC1 is now available</h1>
<div id="pgArchiveWrap">
Posted on <b>2004-04-27</b><br>
Posted by <b>jd@commandprompt.com</b><br><br>
It currently supports SPI, composite types, SetOf function, triggers, trusted, and untrusted modes. <br>
<br>
From the last release (Beta3) SPI, composite types, SetOf functions,
and compile once have been added. Below are some examples of what the
RC1 version of plPHP is currently capable of.<br>
<br>
Using global variables to store data between function callsL<br>
<br>
<pre><br>
CREATE OR REPLACE FUNCTION set_var(text) RETURNS text AS '<br>
global $_SHARED;<br>
$_SHARED[''first'']=$args[0];<br>
return ''ok'';<br>
' LANGUAGE plphp<br>
<br>
CREATE OR REPLACE FUNCTION get_var() RETURNS text AS '<br>
global $_SHARED;<br>
return $_SHARED[''first''];<br>
' LANGUAGE plphp;<br>
<br>
SELECT set_var('hello plphp');<br>
SELECT get_var(); //will return "hello plphp" in our example<br>
<br>
</pre><br>
Database Access (SPI):<br>
<br>
$query = "INSERT INTO my_table VALUES (1, ''test'')";<br>
$rv = spi_exec_query($query);<br>
<br>
The result would be accessed as:<br>
<br>
$res = $rv[''status'']; //SPI_OK_INSERT in our example<br>
$nrows = $rv[''rows''];<br>
<br>
<br>
SetOf functions:<br>
<br>
<pre><br>
CREATE TYPE __testsetphp AS (f1 integer, f2 text, f3 text);<br>
<br>
CREATE OR REPLACE FUNCTION php_set(integer) RETURNS SETOF __testsetphp AS '<br>
$ret[0][0]=$args[0];<br>
$ret[0][1]="hello";<br>
$ret[0][2]="world";<br>
$ret[1][0]=2*$args[0];<br>
$ret[1][1]="hello";<br>
$ret[1][2]="postgres";<br>
$ret[2][0]=3*$args[0];<br>
$ret[2][1]="hello";<br>
$ret[2][2]="plphp";<br>
return $ret;<br>
' LANGUAGE 'plphp';<br>
<br>
<br>
SELECT * FROM php_set(1);<br>
<br>
Will return:<br>
 f1 |  f2   |    f3    <br>
----+-------+----------<br>
  1 | hello | world<br>
  2 | hello | postgres<br>
  3 | hello | plphp<br>
<br>
</pre><br>
<br>
plPHP can be found at the Command Prompt, Inc. community pages located <a href="https://www.commandprompt.com/entry.lxp?lxpe=294"> here</a><br>

</div>

</div>
<br class="pgClearBoth">


      </div>
      <div id="pgFooter">
        <a href="http://www.postgresql.org/about/privacypolicy" class="navFooter">Privacy Policy</a> | Project hosted by <a href="http://www.hub.org/">hub.org</a> | Designed by <a href="http://www.tinysofa.com/">tinysofa</a><br>
        Copyright © 1996 – 2006 PostgreSQL Global Development Group
      </div>
    </div>
   </div>
  
</body></html>