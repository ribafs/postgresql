<html><head>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>Oracle Compatibility Developer&#8217;s Guide</title>

<meta name="GENERATOR" content="HTML Transit 8.0 Trial Version by Avantstar, Inc. www.avantstar.com">
<meta name="TransitPubID" content="2089"><style type="text/css">
<!--
	.Title-1
	{
		text-align: center
	}
	.Heading1-1
	{
		text-align: left
	}
-->
</style></head><body><a name="TopOfPage"> </a>
<!-- TRANSIT - INFOBEFORE -->
<a href="http://www.enterprisedb.com/index.do?lpage=true"><img alt="EnterpriseDB" src="EnterpriseDB_OraCompat_EN_8.3-152_arquivos/logo.gif" border="0"></a><p style="text-align: center;"><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/EnterpriseDB_OraCompat_EN_8.3-151.htm#TopOfPage"><img src="EnterpriseDB_OraCompat_EN_8.3-152_arquivos/inveppv.gif" alt="Previous Page" border="0"></a><!-- TRANSIT - TOC --><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/Table%20of%20Contents.htm#TopOfPage" target="_top"><img src="EnterpriseDB_OraCompat_EN_8.3-152_arquivos/invetoc.gif" alt="Table Of Contents" border="0"></a><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/EnterpriseDB_OraCompat_EN_8.3-153.htm#TopOfPage"><img src="EnterpriseDB_OraCompat_EN_8.3-152_arquivos/invepnx.gif" alt="Next Page" border="0"></a></p>

  <div style="margin-left: 36pt;"><p><a name="P8059_443652"></a><span style="font-family: 'Arial'; font-size: 13pt;">4.7.6 Cursor Attributes</span></p>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">Each cursor has a set of attrib</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">utes associated with it that allows the program to test the state of the cursor</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">.</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">These attributes are </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%ISOPEN</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">, </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%FOUND</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">, </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%NOTFOUND</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">, and </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%ROWCOUNT</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">.</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">These attributes are descr</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">ibed in the following sections.</span></p>

  <div style="margin-left: 43pt;"><p><span style="font-family: 'Times New Roman'; font-size: 14pt;"><a name="P8061_443908"></a>4.7.6.1 %ISOPEN</span></p>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%ISOPEN</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> attribute is used to test w</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">hether</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> or not a cursor is open.</span></p><div style="margin-left: 24pt;"><pre><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;"><i>cursor_name</i></span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%ISOPEN</span></pre>

</div><p><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;"><i>cursor_name</i></span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> is the name of the cursor for which a </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">BOOLEAN</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> data type </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">of &#8220;true&#8221; </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">will be returned if the cursor is open, </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">&#8220;false&#8221; </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">otherwise.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The following is an example of using </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%ISOPEN</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">.</span></p><div style="margin-left: 12pt;"><pre><span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE PROCEDURE cursor_example</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">IS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        ...</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    CURSOR emp_cur_1 IS SELECT * FROM emp;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        ...</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        ...</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    IF emp_cur_1%ISOPEN THEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        NULL;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    ELSE</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        OPEN emp_cur_1;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    END IF;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    FETCH emp_cur_1 INTO ...</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        ...</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">END;</span></pre>

  </div><div style="margin-left: 43pt;"><p><span style="font-family: 'Times New Roman'; font-size: 14pt;"><a name="P8081_444450"></a>4.7.6.2 %FOUND</span></p>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%FOUND</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> a</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">ttribute is used to test whether or not a row is retrieved from the result set of the </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">specified</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> cursor after a </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">FETCH</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> on the cursor.</span></p><div style="margin-left: 24pt;"><pre><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;"><i>cursor_name</i></span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%FOUND</span></pre>

</div><p><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;"><i>cursor_name</i></span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> is the name of the cursor for which a </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">BOOLEAN</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> data type </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">of &#8220;true&#8221; </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">will be returned if a row is retrieved from the result set of the cursor after a </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">FETCH</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">After the last row of the result set has been </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">FETCH</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">ed the next </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">FETCH</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> results in </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%FOUND</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> returning &#8220;false&#8221;. &#8220;false&#8221; is also returned after the first </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">FETCH</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> if there are no rows in the result set to begin with.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">Referencing </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%FOUND</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> on a cursor before it is opened or after it is closed results in an </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">INVALID_CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> exception being thrown.</span></p>

<p><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%FOUND</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> returns </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">null</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> if it is referenced when the cursor is open, but before the first </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">FETCH</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The following example uses </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%FOUND</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">.</span></p><div style="margin-left: 12pt;"><pre><span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE PROCEDURE cursor_example</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">IS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_emp_rec       emp%ROWTYPE;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    CURSOR emp_cur_1 IS SELECT * FROM emp;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    OPEN emp_cur_1;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('EMPNO    ENAME');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('-----    -------');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    FETCH emp_cur_1 INTO v_emp_rec;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    WHILE emp_cur_1%FOUND LOOP</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE(v_emp_rec.empno || '     ' || v_emp_rec.ename);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        FETCH emp_cur_1 INTO v_emp_rec;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    END LOOP;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    CLOSE emp_cur_1;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">END;</span></pre>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">When the previous procedure is invoked, the output appears as follows:</span></p><div style="margin-left: 12pt;"><pre><span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">EXEC cursor_example;</span>

<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">EMPNO    ENAME</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">-----    ------</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7369     SMITH</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7499     ALLEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7521     WARD</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7566     JONES</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7654     MARTIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7698     BLAKE</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7782     CLARK</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7788     SCOTT</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7839     KING</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7844     TURNER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7876     ADAMS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7900     JAMES</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7902     FORD</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7934     MILLER</span></pre>

  </div><div style="margin-left: 43pt;"><p><span style="font-family: 'Times New Roman'; font-size: 14pt;"><a name="P8123_446020"></a>4.7.6.3 %NOTFOUND</span></p>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%NOTFOUND</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> attribute is the logical opposite of </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%FOUND</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">.</span></p><div style="margin-left: 24pt;"><pre><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;"><i>cursor_name</i></span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%NOTFOUND</span></pre>

</div><p><i><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">curso</span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">r_name</span></i><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> is the name of the cursor for which a </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">BOOLEAN</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> data type of</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> &#8220;false&#8221; </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">will be returned if a row is retrieved from the result set of the cursor after a </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">FETCH</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">After the last row of the result set has been </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">FETCH</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">ed the next </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">FETCH</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> results in </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%NOTFOUND</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> returning &#8220;true&#8221;. &#8220;true&#8221; is also returned after the first </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">FETCH</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> if there are no rows in the result set to begin with.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">Referencing </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%NOTFOUND</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> on a cursor before it is opened or after it is closed, results in an </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">INVALID_CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> exception being thrown.</span></p>

<p><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%NOTFOUND</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> re</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">turns </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">null</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> if it is referenced when the cursor is open, but before the first </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">FETCH</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The following example uses </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%NOTFOUND</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">.</span></p><div style="margin-left: 12pt;"><pre><span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE PROCEDURE cursor_example</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">IS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_emp_rec       emp%ROWTYPE;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    CURSOR emp_cur_1 IS SELECT * FROM emp;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    OPEN emp_cur_1;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('EMPNO    ENAME');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('-----    -------');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    LOOP</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        FETCH emp_cur_1 INTO v_emp_rec;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        EXIT WHEN emp_cur_1%NOTFOUND;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE(v_emp_rec.empno || '     ' || v_emp_rec.ename);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    END LOOP;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    CLOSE emp_cur_1;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">END;</span></pre>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">Similar to the prior example, this procedure produces the same output when invoked.</span></p><div style="margin-left: 12pt;"><pre><span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">EXEC cursor_example;</span>

<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">EMPNO    ENAME</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">-----    ------</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7369     SMITH</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7499     ALLEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7521     WARD</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7566     JONES</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7654     MARTIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7698     BLAKE</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7782     CLARK</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7788     SCOTT</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7839     KING</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7844     TURNER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7876     ADAMS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7900     JAMES</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7902     FORD</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7934     MILLER</span></pre>

  </div><div style="margin-left: 43pt;"><p><span style="font-family: 'Times New Roman'; font-size: 14pt;"><a name="P8165_447516"></a>4.7.6.4 %ROWCOUNT</span></p>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%ROWCOUNT</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> attribute returns an integer showing the number of rows </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">FETCH</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">ed so</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> far from the specified</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> cursor.</span></p><div style="margin-left: 24pt;"><pre><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;"><i>cursor_name</i></span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%ROWCOUNT</span></pre>

</div><p><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;"><i>cursor_name</i></span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> is the name of the cursor for which </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%ROWCOUNT</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> returns the number of rows retrieved thus far</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">.</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">After the last row has been retrieved, </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%ROWCOUNT</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> remains set to the total number of rows returned until the cursor is clo</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">sed at which point </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%ROWCOUNT</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> will throw an </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">INVALID_CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> exception if referenced.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">Referencing </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%ROWCOUNT</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> on a cursor before it is opened or after it is closed, results in an </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">INVALID_CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> exception being thrown.</span></p>

<p><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%ROWCOUNT</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> returns </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">0</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> if it is referenced whe</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">n the cursor is open, but before the first </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">FETCH</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">.</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%ROWCOUNT</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> also returns </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">0</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> after the first </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">FETCH</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> when there are no rows in the result set to begin with.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The following example uses </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">%ROWCOUNT</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">.</span></p><div style="margin-left: 12pt;"><pre><span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE PROCEDURE cursor_example</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">IS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_emp_rec       emp%ROWTYPE;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    CURSOR emp_cur_1 IS SELECT * FROM emp;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    OPEN emp_cur_1;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('EMPNO    ENAME');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('-----    -------');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    LOOP</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        FETCH emp_cur_1 INTO v_emp_rec;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        EXIT WHEN emp_cur_1%NOTFOUND;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE(v_emp_rec.empno || '     ' || v_emp_rec.ename);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    END LOOP;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('**********************');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE(emp_cur_1%ROWCOUNT || ' rows were retrieved');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    CLOSE emp_cur_1;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">END;</span></pre>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">This procedure prints the total number of rows retrieved at the end of the employee list as follows:</span></p><div style="margin-left: 12pt;"><pre><span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">EXEC cursor_example;</span>

<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">EMPNO    ENAME</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">-----    -------</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7369     SMITH</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7499     ALLEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7521     WARD</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7566     JONES</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7654     MARTIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7698     BLAKE</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7782     CLARK</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7788     SCOTT</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7839     KING</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7844     TURNER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7876     ADAMS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7900     JAMES</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7902     FORD</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">7934     MILLER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">**********************</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">14 rows were retrieved</span></pre>

  </div><div style="margin-left: 43pt;"><p><span style="font-family: 'Times New Roman'; font-size: 14pt;"><a name="P8210_449272"></a>4.7.6.5 Summary of Cursor States and Attributes</span></p>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The following table summarizes the possible cursor states and the values returned by the cursor attributes.</span></p>

<p><b><span style="font-family: 'Times New Roman'; font-size: 10pt;"><a name="P8212_449426"></a>Table 4-3 Cursor Attributes</span></b></p>
<p>
<table border="1">
<tbody><tr>
<td valign="top" width="125"><p style="text-align: center;"><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">Cursor State</span></p>
</td>
<td valign="top" width="65"><p style="text-align: center;"><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">%ISOPEN</span></p>
</td>
<td valign="top" width="129"><p style="text-align: center;"><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">%FOUND</span></p>
</td>
<td valign="top" width="129"><p style="text-align: center;"><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">%NOTFOUND</span></p>
</td>
<td valign="top" width="129"><p style="text-align: center;"><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">%ROWCOUNT</span></p>
</td></tr>
<tr>
<td valign="top" width="125"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">Before </span><span style="font-family: 'Courier New'; font-size: 9pt; color: Black;">OPEN</span></p>
</td>
<td valign="top" width="65"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">False</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Courier New'; font-size: 9pt; color: Black;">INVALID_CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;"> Exception</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Courier New'; font-size: 9pt; color: Black;">INVALID_CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;"> Exception</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Courier New'; font-size: 9pt; color: Black;">INVALID_CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;"> Exception</span></p>
</td></tr>
<tr>
<td valign="top" width="125"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">After </span><span style="font-family: 'Courier New'; font-size: 9pt; color: Black;">OPEN</span><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;"> &amp; Before 1st </span><span style="font-family: 'Courier New'; font-size: 9pt; color: Black;">FETCH</span></p>
</td>
<td valign="top" width="65"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">True</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">Null</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">Null</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">0</span></p>
</td></tr>
<tr>
<td valign="top" width="125"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">After 1st Successful </span><span style="font-family: 'Courier New'; font-size: 9pt; color: Black;">FETCH</span></p>
</td>
<td valign="top" width="65"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">True</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">True</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">False</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">1</span></p>
</td></tr>
<tr>
<td valign="top" width="125"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">After </span><span style="font-family: 'Courier New'; font-size: 9pt; color: Black;"><i>n</i></span><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">th Successful </span><span style="font-family: 'Courier New'; font-size: 9pt; color: Black;">FETCH</span><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;"> (last row)</span></p>
</td>
<td valign="top" width="65"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">True</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">True</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">False</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">n</span></p>
</td></tr>
<tr>
<td valign="top" width="125"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">After </span><span style="font-family: 'Courier New'; font-size: 9pt; color: Black;"><i>n</i></span><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">+1st </span><span style="font-family: 'Courier New'; font-size: 9pt; color: Black;">FETCH</span><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;"> (after last row)</span></p>
</td>
<td valign="top" width="65"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">True</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">False</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">True</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">n</span></p>
</td></tr>
<tr>
<td valign="top" width="125"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">After </span><span style="font-family: 'Courier New'; font-size: 9pt; color: Black;">CLOSE</span></p>
</td>
<td valign="top" width="65"><p><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;">False</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Courier New'; font-size: 9pt; color: Black;">INVALID_CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;"> Exception</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Courier New'; font-size: 9pt; color: Black;">INVALID_CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;"> Exception</span></p>
</td>
<td valign="top" width="129"><p><span style="font-family: 'Courier New'; font-size: 9pt; color: Black;">INVALID_CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 10pt; color: Black;"> Exception</span></p>
<p><a name="P8249_449853"></a></p></td></tr></tbody></table>

</p><p style="text-align: center;"><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/EnterpriseDB_OraCompat_EN_8.3-151.htm#TopOfPage"><img src="EnterpriseDB_OraCompat_EN_8.3-152_arquivos/inveppv.gif" alt="Previous Page" border="0"></a><!-- TRANSIT - TOC --><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/Table%20of%20Contents.htm#TopOfPage" target="_top"><img src="EnterpriseDB_OraCompat_EN_8.3-152_arquivos/invetoc.gif" alt="Table Of Contents" border="0"></a><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/EnterpriseDB_OraCompat_EN_8.3-153.htm#TopOfPage"><img src="EnterpriseDB_OraCompat_EN_8.3-152_arquivos/invepnx.gif" alt="Next Page" border="0"></a></p>

<a href="http://www.avantstar.com/"><img src="EnterpriseDB_OraCompat_EN_8.3-152_arquivos/transpwr.gif" alt="Powered by Transit"></a><!-- TRANSIT - INFOAFTER -->
<script type="text/javascript"> 
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www."); 
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E")); 
</script><script src="EnterpriseDB_OraCompat_EN_8.3-152_arquivos/ga.js" type="text/javascript"></script> 
<script type="text/javascript"> 
var pageTracker = _gat._getTracker("UA-4413916-2"); 
pageTracker._initData(); 
pageTracker._trackPageview(); 
</script> 
</body></html>