<html><head>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>Oracle Compatibility Developer&#8217;s Guide</title>

<meta name="GENERATOR" content="HTML Transit 8.0 Trial Version by Avantstar, Inc. www.avantstar.com">
<meta name="TransitPubID" content="2094"><style type="text/css">
<!--
	.Title-1
	{
		text-align: center
	}
	.Heading1-1
	{
		text-align: left
	}
-->
</style></head><body><a name="TopOfPage"> </a>
<!-- TRANSIT - INFOBEFORE -->
<a href="http://www.enterprisedb.com/index.do?lpage=true"><img alt="EnterpriseDB" src="EnterpriseDB_OraCompat_EN_8.3-157_arquivos/logo.gif" border="0"></a><p style="text-align: center;"><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/EnterpriseDB_OraCompat_EN_8.3-156.htm#TopOfPage"><img src="EnterpriseDB_OraCompat_EN_8.3-157_arquivos/inveppv.gif" alt="Previous Page" border="0"></a><!-- TRANSIT - TOC --><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/Table%20of%20Contents.htm#TopOfPage" target="_top"><img src="EnterpriseDB_OraCompat_EN_8.3-157_arquivos/invetoc.gif" alt="Table Of Contents" border="0"></a><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/EnterpriseDB_OraCompat_EN_8.3-158.htm#TopOfPage"><img src="EnterpriseDB_OraCompat_EN_8.3-157_arquivos/invepnx.gif" alt="Next Page" border="0"></a></p>

  <div style="margin-left: 36pt;"><p><a name="P8321_453563"></a><span style="font-family: 'Arial'; font-size: 13pt;">4.8.2 Declaring a Cursor Variable</span></p>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">SPL</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> supports the declaration of a cursor variable using both the </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">SYS_REFCURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">built-in data type as well as creating a type of </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">REF CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> and then declaring a variable of that type</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">.</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">SYS_REFCURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> is a </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">REF CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> type that allows any result set to be associated with it</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">.</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">This is known as a </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"><i>weakly-typed</i></span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">REF CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">Only the declaration of </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">SYS_REFCURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> and user-defined </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">REF CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">
variables are different. The remaining usage like opening the cursor,
selecting into the cursor and closing the cursor is the same across
both the cursor types. For the rest of this chapter our examples will
primarily be making use of the </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">SYS_REFCURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> cursors. All you need to change in the examples to make them work for user defined </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">REF CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">s is the declaration section.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"><b>Note: </b></span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"><i>Strongly-typed</i></span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">REF CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">s require the result set to conform to a declared number an</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">d order of fields with compatible data types and can also </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">optionally return a result set.</span></p>

  <div style="margin-left: 43pt;"><p><span style="font-family: 'Times New Roman'; font-size: 14pt;"><a name="P8325_454530"></a>4.8.2.1 Declaring a SYS_REFCURSOR Cursor Variable</span></p>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The following is the syntax for declaring a </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">SYS_REFCURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> cursor variable:</span></p><div style="margin-left: 24pt;"><pre><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;"><i>name</i></span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;"> SYS_REFCURSOR;</span></pre>

</div><p><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;"><i>name</i></span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> is an identifier assigned to the cursor variable.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The following is an example of a </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">SYS_REFCURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> variable declaration.</span></p><div style="margin-left: 12pt;"><pre><span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">DECLARE</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    emp_refcur      SYS_REFCURSOR;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        ...</span></pre>

  </div><div style="margin-left: 43pt;"><p><span style="font-family: 'Times New Roman'; font-size: 14pt;">4.8.2.2 Declaring a User Defined REF CURSOR Type Variable</span></p>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">You must perform two distinct declaration steps in order</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> to use a user defined </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">REF CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> variable:</span></p>

  <div style="margin-left: 36pt;"><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">&#9679; </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">Create a referenced cursor </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">TYPE</span></p>

  <p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">&#9679; </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">Declare the actual cursor variable based on that </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">TYPE</span></p>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The syntax for creating a user defined </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">REF CURSOR</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> type is as follows:</span></p><div style="margin-left: 24pt;"><pre><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">TYPE </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;"><i>cursor_type_name</i></span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;"> IS REF CURSOR [</span><span style="font-family: 'Courier New'; font-size: 11pt;">RETURN return_type</span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">]</span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">;</span></pre>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The following is an example of a cursor variable declaration.</span></p><div style="margin-left: 12pt;"><pre><span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">DECLARE</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    TYPE emp_cur_type IS REF CURSOR RETURN emp%ROWTYPE;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    my_rec emp_cur_type;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        ...</span></pre>

<p style="text-align: center;"><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/EnterpriseDB_OraCompat_EN_8.3-156.htm#TopOfPage"><img src="EnterpriseDB_OraCompat_EN_8.3-157_arquivos/inveppv.gif" alt="Previous Page" border="0"></a><!-- TRANSIT - TOC --><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/Table%20of%20Contents.htm#TopOfPage" target="_top"><img src="EnterpriseDB_OraCompat_EN_8.3-157_arquivos/invetoc.gif" alt="Table Of Contents" border="0"></a><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/EnterpriseDB_OraCompat_EN_8.3-158.htm#TopOfPage"><img src="EnterpriseDB_OraCompat_EN_8.3-157_arquivos/invepnx.gif" alt="Next Page" border="0"></a></p>

<a href="http://www.avantstar.com/"><img src="EnterpriseDB_OraCompat_EN_8.3-157_arquivos/transpwr.gif" alt="Powered by Transit"></a><!-- TRANSIT - INFOAFTER -->
<script type="text/javascript"> 
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www."); 
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E")); 
</script><script src="EnterpriseDB_OraCompat_EN_8.3-157_arquivos/ga.js" type="text/javascript"></script> 
<script type="text/javascript"> 
var pageTracker = _gat._getTracker("UA-4413916-2"); 
pageTracker._initData(); 
pageTracker._trackPageview(); 
</script> 
</div></body></html>