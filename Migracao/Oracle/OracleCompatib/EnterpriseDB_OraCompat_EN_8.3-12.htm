<html><head>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>EnterpriseDB Oracle Compatibility Developer's Guide: Sample Database Description and Installation</title>

<meta name="GENERATOR" content="HTML Transit 8.0 Trial Version by Avantstar, Inc. www.avantstar.com">
<meta name="TransitPubID" content="1949"><style type="text/css">
<!--
	.Title-1
	{
		text-align: center
	}
	.Heading1-1
	{
		text-align: left
	}
-->
</style></head><body><a name="TopOfPage"> </a>
<!-- TRANSIT - INFOBEFORE -->
<a href="http://www.enterprisedb.com/index.do?lpage=true"><img alt="EnterpriseDB" src="EnterpriseDB_OraCompat_EN_8.3-12_arquivos/logo.gif" border="0"></a><p style="text-align: center;"><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/EnterpriseDB_OraCompat_EN_8.3-11.htm#TopOfPage"><img src="EnterpriseDB_OraCompat_EN_8.3-12_arquivos/inveppv.gif" alt="Previous Page" border="0"></a><!-- TRANSIT - TOC --><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/Table%20of%20Contents.htm#TopOfPage" target="_top"><img src="EnterpriseDB_OraCompat_EN_8.3-12_arquivos/invetoc.gif" alt="Table Of Contents" border="0"></a><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/EnterpriseDB_OraCompat_EN_8.3-13.htm#TopOfPage"><img src="EnterpriseDB_OraCompat_EN_8.3-12_arquivos/invepnx.gif" alt="Next Page" border="0"></a></p>

  <div style="margin-left: 36pt;"><p><a name="P500_24275"></a><span style="font-family: 'Arial'; font-size: 13pt;">2.1.1 Sample Database</span></p>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">Throughout
this documentation we will be working with a sample database to help
explain some basic to advanced level database concepts.</span></p>

  <div style="margin-left: 43pt;"><p><span style="font-family: 'Times New Roman'; font-size: 14pt;">2.1.1.1 Sample Database Installation</span></p>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">When </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">Postgres Plus Advanced Server</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> is installed a sample database named, </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">edb</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">, is automatically created. This sample database contains the tables and programs used throughout this document.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The tables and programs in the sample database can be re-created at any time by executing the script, </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">edb-sample.sql</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">, located in the </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">sam</span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">ples</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> subdirectory of the </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">Postgres Plus Advanced Server</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> home directory.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">This script does the following:</span></p>

  <div style="margin-left: 36pt;"><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">&#9679; </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">Creates the sample tables and programs in the currently connected database</span></p>

  <p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">&#9679; </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">Grants all permissions on the tables to the </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">PUBLIC</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> group</span></p>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The
tables and programs will be created in the first schema of the search
path in which the current user has permission to create tables and
procedures. You can display the search path by issuing the command:</span></p><div style="margin-left: 12pt;"><pre><span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">SHOW SEARCH_PATH;</span></pre>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">Altering the search path can be done using commands in </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">PSQL</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">.</span></p>

  <div style="margin-left: 43pt;"><p><span style="font-family: 'Times New Roman'; font-size: 14pt;">2.1.1.2 Sample Database Description</span></p>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The sample database represents employees in an organization.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">It contains three types of records: employees, departments, and historical records of employees.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">Each
employee has an identification number, name, hire date, salary, and
manager. Some employees earn a commission in addition to their salary.
All employee-related information is stored in the </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">emp</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> table.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The
sample company is regionally diverse, so it tracks the locations of its
departments. Each company employee is assigned to a department. Each
department is identified by a unique department number and a short
name. Each department is associated with one location. All
department-related information is stored in the </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">dept</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> table.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The
company also tracks information about jobs held by the employees. Some
employees have been with the company for a long time and have held
different positions, received raises, switched departments, etc. When a
change in employee status occurs, the company records the end date of
the former position. A new job record is added with the start date and
the new job title, department, salary, and the reason for the status
change. All employee history is maintained in the </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">jobhist</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> table.</span></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The following is an entity relationship diagram of the sample database tables.</span></p>

<p style="text-align: center;"><img src="EnterpriseDB_OraCompat_EN_8.3-12_arquivos/EnterpriseDB_OraCompat_EN_8.jpg" border="1" height="384" width="492"></p>

<p style="text-align: center;"><b><span style="font-family: 'Times New Roman'; font-size: 10pt;">Figure 1 Sample Database Tables</span></b></p>

<p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The following is the </span><span style="font-family: 'Courier New'; font-size: 11pt; color: Black;">edb-sample.sql</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> script.</span></p><div style="margin-left: 12pt;"><pre><span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Script that creates the 'sample' tables, views, procedures,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  functions, triggers, etc.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Start new transaction - commit all or nothing</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">BEGIN;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">/</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Create and load tables used in the documentation examples.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Create the 'dept' table</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE TABLE dept (</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    deptno          NUMBER(2) NOT NULL CONSTRAINT dept_pk PRIMARY KEY,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    dname           VARCHAR2(14) CONSTRAINT dept_dname_uq UNIQUE,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    loc             VARCHAR2(13)</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Create the 'emp' table</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE TABLE emp (</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    empno           NUMBER(4) NOT NULL CONSTRAINT emp_pk PRIMARY KEY,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    ename           VARCHAR2(10),</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    job             VARCHAR2(9),</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    mgr             NUMBER(4),</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    hiredate        DATE,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    sal             NUMBER(7,2) CONSTRAINT emp_sal_ck CHECK (sal &gt; 0),</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    comm            NUMBER(7,2),</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    deptno          NUMBER(2) CONSTRAINT emp_ref_dept_fk</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">                        REFERENCES dept(deptno)</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Create the 'jobhist' table</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE TABLE jobhist (</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    empno           NUMBER(4) NOT NULL,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    startdate       DATE NOT NULL,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    enddate         DATE,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    job             VARCHAR2(9),</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    sal             NUMBER(7,2),</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    comm            NUMBER(7,2),</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    deptno          NUMBER(2),</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    chgdesc         VARCHAR2(80),</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    CONSTRAINT jobhist_pk PRIMARY KEY (empno, startdate),</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    CONSTRAINT jobhist_ref_emp_fk FOREIGN KEY (empno)</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        REFERENCES emp(empno) ON DELETE CASCADE,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    CONSTRAINT jobhist_ref_dept_fk FOREIGN KEY (deptno)</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        REFERENCES dept (deptno) ON DELETE SET NULL,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    CONSTRAINT jobhist_date_chk CHECK (startdate &lt;= enddate)</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Create the 'salesemp' view</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE VIEW salesemp AS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    SELECT empno, ename, hiredate, sal, comm FROM emp WHERE job = 'SALESMAN';</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Sequence to generate values for function 'new_empno'.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE SEQUENCE next_empno START WITH 8000 INCREMENT BY 1;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Issue PUBLIC grants</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">GRANT ALL ON emp TO PUBLIC;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">GRANT ALL ON dept TO PUBLIC;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">GRANT ALL ON jobhist TO PUBLIC;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">GRANT ALL ON salesemp TO PUBLIC;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">GRANT ALL ON next_empno TO PUBLIC;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Load the 'dept' table</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO dept VALUES (10,'ACCOUNTING','NEW YORK');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO dept VALUES (20,'RESEARCH','DALLAS');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO dept VALUES (30,'SALES','CHICAGO');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO dept VALUES (40,'OPERATIONS','BOSTON');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Load the 'emp' table</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO emp VALUES (7369,'SMITH','CLERK',7902,'17-DEC-80',800,NULL,20);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO emp VALUES (7499,'ALLEN','SALESMAN',7698,'20-FEB-81',1600,300,30);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO emp VALUES (7521,'WARD','SALESMAN',7698,'22-FEB-81',1250,500,30);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO emp VALUES (7566,'JONES','MANAGER',7839,'02-APR-81',2975,NULL,20);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO emp VALUES (7654,'MARTIN','SALESMAN',7698,'28-SEP-81',1250,1400,30);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO emp VALUES (7698,'BLAKE','MANAGER',7839,'01-MAY-81',2850,NULL,30);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO emp VALUES (7782,'CLARK','MANAGER',7839,'09-JUN-81',2450,NULL,10);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO emp VALUES (7788,'SCOTT','ANALYST',7566,'19-APR-87',3000,NULL,20);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO emp VALUES (7839,'KING','PRESIDENT',NULL,'17-NOV-81',5000,NULL,10);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO emp VALUES (7844,'TURNER','SALESMAN',7698,'08-SEP-81',1500,0,30);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO emp VALUES (7876,'ADAMS','CLERK',7788,'23-MAY-87',1100,NULL,20);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO emp VALUES (7900,'JAMES','CLERK',7698,'03-DEC-81',950,NULL,30);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO emp VALUES (7902,'FORD','ANALYST',7566,'03-DEC-81',3000,NULL,20);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO emp VALUES (7934,'MILLER','CLERK',7782,'23-JAN-82',1300,NULL,10);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Load the 'jobhist' table</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO jobhist VALUES (7369,'17-DEC-80',NULL,'CLERK',800,NULL,20,'New Hire');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO jobhist VALUES (7499,'20-FEB-81',NULL,'SALESMAN',1600,300,30,'New Hire');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO jobhist VALUES (7521,'22-FEB-81',NULL,'SALESMAN',1250,500,30,'New Hire');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO jobhist VALUES (7566,'02-APR-81',NULL,'MANAGER',2975,NULL,20,'New Hire');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO jobhist VALUES (7654,'28-SEP-81',NULL,'SALESMAN',1250,1400,30,'New Hire');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO jobhist VALUES (7698,'01-MAY-81',NULL,'MANAGER',2850,NULL,30,'New Hire');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO jobhist VALUES (7782,'09-JUN-81',NULL,'MANAGER',2450,NULL,10,'New Hire');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO jobhist VALUES (7788,'19-APR-87','12-APR-88','CLERK',1000,NULL,20,'New Hire');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO jobhist VALUES (7788,'13-APR-88','04-MAY-89','CLERK',1040,NULL,20,'Raise');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO jobhist VALUES (7788,'05-MAY-90',NULL,'ANALYST',3000,NULL,20,'Promoted to Analyst');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO jobhist VALUES (7839,'17-NOV-81',NULL,'PRESIDENT',5000,NULL,10,'New Hire');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO jobhist VALUES (7844,'08-SEP-81',NULL,'SALESMAN',1500,0,30,'New Hire');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO jobhist VALUES (7876,'23-MAY-87',NULL,'CLERK',1100,NULL,20,'New Hire');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO jobhist VALUES (7900,'03-DEC-81','14-JAN-83','CLERK',950,NULL,10,'New Hire');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO jobhist VALUES (7900,'15-JAN-83',NULL,'CLERK',950,NULL,30,'Changed to Dept 30');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO jobhist VALUES (7902,'03-DEC-81',NULL,'ANALYST',3000,NULL,20,'New Hire');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">INSERT INTO jobhist VALUES (7934,'23-JAN-82',NULL,'CLERK',1300,NULL,10,'New Hire');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Populate statistics table and view (pg_statistic/pg_stats)</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">ANALYZE dept;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">ANALYZE emp;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">ANALYZE jobhist;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Procedure that lists all employees' numbers and names</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  from the 'emp' table using a cursor.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE PROCEDURE list_emp</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">IS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_empno         NUMBER(4);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_ename         VARCHAR2(10);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    CURSOR emp_cur IS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        SELECT empno, ename FROM emp ORDER BY empno;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    OPEN emp_cur;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('EMPNO    ENAME');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('-----    -------');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    LOOP</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        FETCH emp_cur INTO v_empno, v_ename;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        EXIT WHEN emp_cur%NOTFOUND;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE(v_empno || '     ' || v_ename);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    END LOOP;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    CLOSE emp_cur;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">END;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">/</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Procedure that selects an employee row given the employee</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  number and displays certain columns.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE PROCEDURE select_emp (</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    p_empno         IN  NUMBER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">)</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">IS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_ename         emp.ename%TYPE;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_hiredate      emp.hiredate%TYPE;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_sal           emp.sal%TYPE;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_comm          emp.comm%TYPE;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_dname         dept.dname%TYPE;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_disp_date     VARCHAR2(10);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    SELECT ename, hiredate, sal, NVL(comm, 0), dname</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        INTO v_ename, v_hiredate, v_sal, v_comm, v_dname</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        FROM emp e, dept d</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        WHERE empno = p_empno</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">          AND e.deptno = d.deptno;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_disp_date := TO_CHAR(v_hiredate, 'MM/DD/YYYY');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Number    : ' || p_empno);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Name      : ' || v_ename);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Hire Date : ' || v_disp_date);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Salary    : ' || v_sal);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Commission: ' || v_comm);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Department: ' || v_dname);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">EXCEPTION</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    WHEN NO_DATA_FOUND THEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE('Employee ' || p_empno || ' not found');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    WHEN OTHERS THEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE('The following is SQLERRM:');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE(SQLERRM);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE('The following is SQLCODE:');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE(SQLCODE);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">END;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">/</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Procedure that queries the 'emp' table based on</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  department number and employee number or name.  Returns</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  employee number and name as IN OUT parameters and job,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  hire date, and salary as OUT parameters.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE PROCEDURE emp_query (</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    p_deptno        IN     NUMBER,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    p_empno         IN OUT NUMBER,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    p_ename         IN OUT VARCHAR2,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    p_job           OUT    VARCHAR2,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    p_hiredate      OUT    DATE,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    p_sal           OUT    NUMBER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">)</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">IS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    SELECT empno, ename, job, hiredate, sal</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        INTO p_empno, p_ename, p_job, p_hiredate, p_sal</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        FROM emp</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        WHERE deptno = p_deptno</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">          AND (empno = p_empno</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">           OR  ename = UPPER(p_ename));</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">END;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">/</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Procedure to call 'emp_query_caller' with IN and IN OUT</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  parameters.  Displays the results received from IN OUT and</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  OUT parameters.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE PROCEDURE emp_query_caller</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">IS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_deptno        NUMBER(2);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_empno         NUMBER(4);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_ename         VARCHAR2(10);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_job           VARCHAR2(9);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_hiredate      DATE;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_sal           NUMBER;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_deptno := 30;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_empno  := 0;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_ename  := 'Martin';</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    emp_query(v_deptno, v_empno, v_ename, v_job, v_hiredate, v_sal);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Department : ' || v_deptno);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Employee No: ' || v_empno);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Name       : ' || v_ename);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Job        : ' || v_job);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Hire Date  : ' || v_hiredate);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Salary     : ' || v_sal);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">EXCEPTION</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    WHEN TOO_MANY_ROWS THEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE('More than one employee was selected');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    WHEN NO_DATA_FOUND THEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE('No employees were selected');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">END;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">/</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Function to compute yearly compensation based on semimonthly</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  salary.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE FUNCTION emp_comp (</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    p_sal           NUMBER,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    p_comm          NUMBER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">) RETURN NUMBER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">IS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    RETURN (p_sal + NVL(p_comm, 0)) * 24;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">END;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">/</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Function that gets the next number from sequence, 'next_empno',</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  and ensures it is not already in use as an employee number.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE FUNCTION new_empno RETURN NUMBER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">IS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_cnt           INTEGER := 1;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_new_empno     NUMBER;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    WHILE v_cnt &gt; 0 LOOP</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        SELECT next_empno.nextval INTO v_new_empno FROM dual;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        SELECT COUNT(*) INTO v_cnt FROM emp WHERE empno = v_new_empno;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    END LOOP;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    RETURN v_new_empno;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">END;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">/</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  EDB-SPL function that adds a new clerk to table 'emp'.  This function</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  uses package 'emp_admin'.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE FUNCTION hire_clerk (</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    p_ename         VARCHAR2,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    p_deptno        NUMBER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">) RETURN NUMBER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">IS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_empno         NUMBER(4);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_ename         VARCHAR2(10);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_job           VARCHAR2(9);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_mgr           NUMBER(4);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_hiredate      DATE;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_sal           NUMBER(7,2);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_comm          NUMBER(7,2);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_deptno        NUMBER(2);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_empno := new_empno;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    INSERT INTO emp VALUES (v_empno, p_ename, 'CLERK', 7782,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        TRUNC(SYSDATE), 950.00, NULL, p_deptno);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    SELECT empno, ename, job, mgr, hiredate, sal, comm, deptno INTO</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        v_empno, v_ename, v_job, v_mgr, v_hiredate, v_sal, v_comm, v_deptno</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        FROM emp WHERE empno = v_empno;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Department : ' || v_deptno);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Employee No: ' || v_empno);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Name       : ' || v_ename);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Job        : ' || v_job);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Manager    : ' || v_mgr);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Hire Date  : ' || v_hiredate);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Salary     : ' || v_sal);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('Commission : ' || v_comm);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    RETURN v_empno;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">EXCEPTION</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    WHEN OTHERS THEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE('The following is SQLERRM:');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE(SQLERRM);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE('The following is SQLCODE:');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE(SQLCODE);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        RETURN -1;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">END;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">/</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  PostgreSQL PL/pgSQL function that adds a new salesman</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  to table 'emp'.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE FUNCTION hire_salesman (</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    p_ename         VARCHAR,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    p_sal           NUMERIC,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    p_comm          NUMERIC</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">) RETURNS NUMERIC</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">AS $$</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">DECLARE</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_empno         NUMERIC(4);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_ename         VARCHAR(10);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_job           VARCHAR(9);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_mgr           NUMERIC(4);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_hiredate      DATE;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_sal           NUMERIC(7,2);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_comm          NUMERIC(7,2);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_deptno        NUMERIC(2);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_empno := new_empno();</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    INSERT INTO emp VALUES (v_empno, p_ename, 'SALESMAN', 7698,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        CURRENT_DATE, p_sal, p_comm, 30);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    SELECT INTO</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        v_empno, v_ename, v_job, v_mgr, v_hiredate, v_sal, v_comm, v_deptno</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        empno, ename, job, mgr, hiredate, sal, comm, deptno</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        FROM emp WHERE empno = v_empno;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    RAISE INFO 'Department : %', v_deptno;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    RAISE INFO 'Employee No: %', v_empno;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    RAISE INFO 'Name       : %', v_ename;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    RAISE INFO 'Job        : %', v_job;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    RAISE INFO 'Manager    : %', v_mgr;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    RAISE INFO 'Hire Date  : %', v_hiredate;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    RAISE INFO 'Salary     : %', v_sal;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    RAISE INFO 'Commission : %', v_comm;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    RETURN v_empno;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">EXCEPTION</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    WHEN OTHERS THEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        RAISE INFO 'The following is SQLERRM:';</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        RAISE INFO '%', SQLERRM;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        RAISE INFO 'The following is SQLSTATE:';</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        RAISE INFO '%', SQLSTATE;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        RETURN -1;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">END;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">$$ LANGUAGE 'plpgsql';</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">/</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Rule to INSERT into view 'salesemp'</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE RULE salesemp_i AS ON INSERT TO salesemp</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">DO INSTEAD</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    INSERT INTO emp VALUES (NEW.empno, NEW.ename, 'SALESMAN', 7698,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        NEW.hiredate, NEW.sal, NEW.comm, 30);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Rule to UPDATE view 'salesemp'</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE RULE salesemp_u AS ON UPDATE TO salesemp</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">DO INSTEAD</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    UPDATE emp SET empno    = NEW.empno,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">                   ename    = NEW.ename,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">                   hiredate = NEW.hiredate,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">                   sal      = NEW.sal,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">                   comm     = NEW.comm</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        WHERE empno = OLD.empno;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Rule to DELETE from view 'salesemp'</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE RULE salesemp_d AS ON DELETE TO salesemp</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">DO INSTEAD</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DELETE FROM emp WHERE empno = OLD.empno;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  After statement-level trigger that displays a message after</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  an insert, update, or deletion to the 'emp' table.  One message</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  per SQL command is displayed.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE TRIGGER user_audit_trig</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    AFTER INSERT OR UPDATE OR DELETE ON emp</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">DECLARE</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    v_action        VARCHAR2(24);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    IF INSERTING THEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        v_action := ' added employee(s) on ';</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    ELSIF UPDATING THEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        v_action := ' updated employee(s) on ';</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    ELSIF DELETING THEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        v_action := ' deleted employee(s) on ';</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    END IF;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    DBMS_OUTPUT.PUT_LINE('User ' || USER || v_action || TO_CHAR(SYSDATE,'YYYY-MM-DD'));</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">END;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">/</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Before row-level trigger that displays employee number and</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  salary of an employee that is about to be added, updated,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  or deleted in the 'emp' table.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE TRIGGER emp_sal_trig</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    BEFORE DELETE OR INSERT OR UPDATE ON emp</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    FOR EACH ROW</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">DECLARE</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    sal_diff       NUMBER;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    IF INSERTING THEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE('Inserting employee ' || :NEW.empno);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE('..New salary: ' || :NEW.sal);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    END IF;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    IF UPDATING THEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        sal_diff := :NEW.sal - :OLD.sal;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE('Updating employee ' || :OLD.empno);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE('..Old salary: ' || :OLD.sal);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE('..New salary: ' || :NEW.sal);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE('..Raise     : ' || sal_diff);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    END IF;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    IF DELETING THEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE('Deleting employee ' || :OLD.empno);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DBMS_OUTPUT.PUT_LINE('..Old salary: ' || :OLD.sal);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    END IF;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">END;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">/</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Package specification for the 'emp_admin' package.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE PACKAGE emp_admin</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">IS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    FUNCTION get_dept_name (</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_deptno        NUMBER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    ) RETURN VARCHAR2;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    FUNCTION update_emp_sal (</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_empno         NUMBER,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_raise         NUMBER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    ) RETURN NUMBER;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    PROCEDURE hire_emp (</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_empno         NUMBER,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_ename         VARCHAR2,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_job           VARCHAR2,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_sal           NUMBER,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_hiredate      DATE,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_comm          NUMBER,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_mgr           NUMBER,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_deptno        NUMBER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    );</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    PROCEDURE fire_emp (</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_empno         NUMBER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    );</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">END emp_admin;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">/</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--  Package body for the 'emp_admin' package.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">--</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">CREATE OR REPLACE PACKAGE BODY emp_admin</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">IS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    --</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    --  Function that queries the 'dept' table based on the department</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    --  number and returns the corresponding department name.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    --</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    FUNCTION get_dept_name (</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_deptno        IN NUMBER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    ) RETURN VARCHAR2</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    IS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        v_dname         VARCHAR2(14);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        SELECT dname INTO v_dname FROM dept WHERE deptno = p_deptno;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        RETURN v_dname;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    EXCEPTION</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        WHEN NO_DATA_FOUND THEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">            DBMS_OUTPUT.PUT_LINE('Invalid department number ' || p_deptno);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">            RETURN '';</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    END;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    --</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    --  Function that updates an employee's salary based on the</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    --  employee number and salary increment/decrement passed</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    --  as IN parameters.  Upon successful completion the function</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    --  returns the new updated salary.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    --</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    FUNCTION update_emp_sal (</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_empno         IN NUMBER,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_raise         IN NUMBER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    ) RETURN NUMBER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    IS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        v_sal           NUMBER := 0;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        SELECT sal INTO v_sal FROM emp WHERE empno = p_empno;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        v_sal := v_sal + p_raise;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        UPDATE emp SET sal = v_sal WHERE empno = p_empno;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        RETURN v_sal;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    EXCEPTION</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        WHEN NO_DATA_FOUND THEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">            DBMS_OUTPUT.PUT_LINE('Employee ' || p_empno || ' not found');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">            RETURN -1;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        WHEN OTHERS THEN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">            DBMS_OUTPUT.PUT_LINE('The following is SQLERRM:');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">            DBMS_OUTPUT.PUT_LINE(SQLERRM);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">            DBMS_OUTPUT.PUT_LINE('The following is SQLCODE:');</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">            DBMS_OUTPUT.PUT_LINE(SQLCODE);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">            RETURN -1;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    END;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    --</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    --  Procedure that inserts a new employee record into the 'emp' table.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    --</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    PROCEDURE hire_emp (</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_empno         NUMBER,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_ename         VARCHAR2,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_job           VARCHAR2,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_sal           NUMBER,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_hiredate      DATE,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_comm          NUMBER,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_mgr           NUMBER,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_deptno        NUMBER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    )</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    AS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        INSERT INTO emp(empno, ename, job, sal, hiredate, comm, mgr, deptno)</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">            VALUES(p_empno, p_ename, p_job, p_sal,</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">                   p_hiredate, p_comm, p_mgr, p_deptno);</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    END;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    --</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    --  Procedure that deletes an employee record from the 'emp' table based</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    --  on the employee number.</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    --</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    PROCEDURE fire_emp (</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        p_empno         NUMBER</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    )</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    AS</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    BEGIN</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">        DELETE FROM emp WHERE empno = p_empno;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">    END;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">END;</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">/</span>
<span style="font-family: 'Courier New'; font-size: 9pt; color: rgb(46, 49, 146);">COMMIT;</span></pre>

</div><p><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">The following sections begin the discussion of basic </span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;">SQL</span><span style="font-family: 'Times New Roman'; font-size: 12pt; color: Black;"> commands.</span></p>

<p style="text-align: center;"><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/EnterpriseDB_OraCompat_EN_8.3-11.htm#TopOfPage"><img src="EnterpriseDB_OraCompat_EN_8.3-12_arquivos/inveppv.gif" alt="Previous Page" border="0"></a><!-- TRANSIT - TOC --><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/Table%20of%20Contents.htm#TopOfPage" target="_top"><img src="EnterpriseDB_OraCompat_EN_8.3-12_arquivos/invetoc.gif" alt="Table Of Contents" border="0"></a><a href="http://www.enterprisedb.com/docs/en/8.3/oracompat/EnterpriseDB_OraCompat_EN_8.3-13.htm#TopOfPage"><img src="EnterpriseDB_OraCompat_EN_8.3-12_arquivos/invepnx.gif" alt="Next Page" border="0"></a></p>

<a href="http://www.avantstar.com/"><img src="EnterpriseDB_OraCompat_EN_8.3-12_arquivos/transpwr.gif" alt="Powered by Transit"></a><!-- TRANSIT - INFOAFTER -->
<script type="text/javascript"> 
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www."); 
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E")); 
</script><script src="EnterpriseDB_OraCompat_EN_8.3-12_arquivos/ga.js" type="text/javascript"></script> 
<script type="text/javascript"> 
var pageTracker = _gat._getTracker("UA-4413916-2"); 
pageTracker._initData(); 
pageTracker._trackPageview(); 
</script> 
</body></html>